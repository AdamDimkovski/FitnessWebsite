<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Calorie Calculator</title>
  <link rel="stylesheet" href="style-calculator.css">
</head>
<body>

<!-- Navigation Bar -->
<nav>
    <nav-content>
    <a href="index.html">Home</a>
    </nav-content> 
    <nav-content>
    <a href="calculator.html">Maintenance Calculator</a>
    </nav-content>
    <nav-content>
    <a href="food.html">Diet Tracker</a>
    </nav-content>
    <nav-content>
    <a href="exercise.html">Workout Tracker</a>
    </nav-content>
    <nav-content>
    <a href="sign-up.html">Sign Up</a>
    </nav-content>
    <nav-content>
    <a href="log-in.html">Log In</a>
    </nav-content>
</nav>

  <!-- Brief paragraph of text to explain page -->
  <h1>Calorie Calculator</h1>
  <p>You can use this maintenance calculator to discover your current maintenance. 
    (the amount of calories you need to maintain your current weight)
    This can also be useful for gaining or losing weight!
  </p>

  <!-- Enables script.js to run upon website running -->
  <script src="script.js"></script>

  <!-- flex container to hold calculation body and result body -->
  <div class="flex-container">
  <div class="flex-child">
    <calculation-body>

    <!-- Age Button - Value stored as const age -->
   <p>
  <label for="ageInput">Age:
    <input type="number" id="ageInput" placeholder="Enter your age">
    <span class="tooltip">❓
      <span class="tooltiptext">Your age helps estimate your metabolic rate.</span>
    </span>
  </label>
</p>

    

    <!-- Gender Radio Button - Value stored as const age -->
<p>
  Gender:
  <span class="tooltip">❓
    <span class="tooltiptext">Gender affects how your body burns calories and is used in BMR formulas.</span>
  </span>
</p>

<input type="radio" id="option1" name="choice" value="Male">
<label for="option1">Male</label><br>

<input type="radio" id="option2" name="choice" value="Female">
<label for="option2">Female</label><br>


   <!-- Height Button - Value stored as const height -->
   <p>
  <label for="heightInput">Height:
    <input type="number" id="heightInput" placeholder="Please enter your height!">
    <span class="tooltip">❓
      <span class="tooltiptext">Enter your height in your selected metric.</span>
    </span>
  </label>
</p>

   <!-- Weight Button - Value stored as const weight -->
   <p>
  <label for="weightInput">Weight:
    <input type="number" id="weightInput" placeholder="Please enter your weight!">
    <span class="tooltip">❓
      <span class="tooltiptext">Enter your current weight in your selected metric.</span>
    </span>
  </label>
</p>

    <!-- Activity Level Dropdown - Value stored as const activityLevel -->
<p>
  <label for="myDropdown">Activity Level:
    </span>
  </label>
  <select id="myDropdown" name="myDropdownName">
    <option value="">Please select</option>
    <option value="option1">Sedentary (little to no exercise)</option>
    <option value="option2">Lightly Active (light exercise 1-3 days/week)</option>
    <option value="option3">Moderately Active (moderate exercise 3-5 days/week)</option>
    <option value="option4">Very Active (hard exercise 6-7 days/week)</option>
    <option value="option5">Super Active (very hard exercise & physical job or twice daily training)</option>
  </select>
      <span class="tooltip">❓
      <span class="tooltiptext">
        Choose the option that best describes your weekly activity. This affects your calorie needs.
      </span>
</p>

    <!-- Goal Selector Dropdown - Value stored as const goalLevel -->
<p>
  <label for="goalSelect">Goal:
    </span>
  </label>
  <select id="goalSelect">
    <option value="">Please select</option>
    <option value="maintain">Maintain weight</option>
    <option value="lose">Lose weight</option>
    <option value="gain">Gain weight</option>
  </select>
  <span class="tooltip">❓
      <span class="tooltiptext">
        Select whether you want to maintain, lose, or gain weight. This adjusts your calorie target.
      </span>
</p>


  <!-- Calculate Button -->
  <button class="calculate-button" onclick="calculateMain()">Calculate</button>

  <!-- Toggle Button -->
  <p>
    Toggle Extra Settings:
    <button class="collapsible-btn">+</button>
  </p>

  <!-- Collapsible Extra Settings -->
  <div class="collapsible-content">
    <fieldset>
      <legend>Unit Preferences</legend>

      <!-- Weight Unit Toggle -->
      <label>Weight Unit:</label>
      <div class="toggle-group" id="weight-toggle">
        <button type="button" class="toggle-btn active" data-unit="kg">kg</button>
        <button type="button" class="toggle-btn" data-unit="lbs">lbs</button>
      </div>

      <!-- Height Unit Toggle -->
      <label>Height Unit:</label>
      <div class="toggle-group" id="height-toggle">
        <button type="button" class="toggle-btn active" data-unit="cm">cm</button>
        <button type="button" class="toggle-btn" data-unit="inches">inches</button>
      </div>
    </fieldset>
  </div>

  <script>

    // Toggle collapsible content
    const button = document.querySelector(".collapsible-btn");
    const content = document.querySelector(".collapsible-content");

    button.addEventListener("click", () => {
      if (content.style.maxHeight) {
        content.style.maxHeight = null;
      } else {
        content.style.maxHeight = content.scrollHeight + "px";
      }
    });

    // Unit toggle logic
    let selectedWeightUnit = "kg";
    let selectedHeightUnit = "cm";

    document.querySelectorAll("#weight-toggle .toggle-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        selectedWeightUnit = btn.dataset.unit;
        document.querySelectorAll("#weight-toggle .toggle-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
      });
    });

    document.querySelectorAll("#height-toggle .toggle-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        selectedHeightUnit = btn.dataset.unit;
        document.querySelectorAll("#height-toggle .toggle-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
      });
    });

    // You can now use selectedWeightUnit and selectedHeightUnit in your calculateMain() function
  </script>

  </div>

<div class="flex-child">
  <result-body>
    <p id="resultOutput"></p><div id="resultBox" class="result-box"></div>
  </result-body>
</div>

<script>
function calculateMain() {
  const age = parseInt(document.getElementById("ageInput").value);
  const gender = document.querySelector('input[name="choice"]:checked');
  
  let weight = parseFloat(document.getElementById("weightInput").value);
  let height = parseFloat(document.getElementById("heightInput").value);

  // Get unit preferences from collapsible section
  const weightUnit = selectedWeightUnit;
  const heightUnit = selectedHeightUnit;


  // Convert to metric if needed
  if (weightUnit === "lbs") {
    weight = weight * 0.453592; // lbs to kg
  }
  if (heightUnit === "inches") {
    height = height * 2.54; // inches to cm
  }

  const activityLevel = document.getElementById("myDropdown").value;
  const goal = document.getElementById("goalSelect").value;

  let bmr;
  let maintenance;
  let targetCalories;

  // Validation
  if (!age) { alert("Please enter your age!"); return; }
  if (!gender) { alert("Please select your gender!"); return; }
  if (!height) { alert("Please enter your height!"); return; }
  if (!weight) { alert("Please enter your weight!"); return; }
  if (!activityLevel) { alert("Please select your activity level!"); return; }
  if (!goal) { alert("Please select your goal!"); return; }

  // Calculate BMR
  if (gender.value === "Male") {
    bmr = (10 * weight) + (6.25 * height) - (5 * age) + 5;
  } else {
    bmr = (10 * weight) + (6.25 * height) - (5 * age) - 161;
  }

  // Activity multiplier
  switch (activityLevel) {
    case "option1": maintenance = bmr * 1.2; break;
    case "option2": maintenance = bmr * 1.375; break;
    case "option3": maintenance = bmr * 1.55; break;
    case "option4": maintenance = bmr * 1.725; break;
    case "option5": maintenance = bmr * 1.9; break;
  }

  // Adjust target calories based on goal
  if (goal === "maintain") {
    targetCalories = maintenance;
  } else if (goal === "lose") {
    targetCalories = maintenance - 250; // typical deficit
  } else if (goal === "gain") {
    targetCalories = maintenance + 250; // typical surplus
  }

  // Macronutrient breakdown (40% carbs, 30% protein, 30% fat)
  const proteinCalories = targetCalories * 0.30;
  const carbCalories = targetCalories * 0.40;
  const fatCalories = targetCalories * 0.30;

  const proteinGrams = (proteinCalories / 4).toFixed(0);
  const carbGrams = (carbCalories / 4).toFixed(0);
  const fatGrams = (fatCalories / 9).toFixed(0);

  // Display result in second div
  document.getElementById("resultBox").style.display = "block"; // Show the box
  document.getElementById("resultBox").innerHTML = `
    <h2>Results</h2>
    <p><strong>BMR:</strong> ${bmr.toFixed(2)} kcal/day</p>
    <p><strong>Maintenance Calories:</strong> ${maintenance.toFixed(2)} kcal/day</p>
    <p><strong>Target Calories for Goal:</strong> ${targetCalories.toFixed(2)} kcal/day</p>
    <h3>Macronutrient Breakdown</h3>
    <p>Protein: ${proteinGrams} g/day</p>
    <p>Carbs: ${carbGrams} g/day</p>
    <p>Fat: ${fatGrams} g/day</p>
  `;
}
</script>

</body>
</html>